<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title># SEQL reference</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Seql</span> <span class="project-version">0.1.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="README.html"><div class="inner"><span># Introduction</span></div></a></li><li class="depth-1 "><a href="quickstart.html"><div class="inner"><span># Quickstart</span></div></a></li><li class="depth-1 "><a href="sandbox.html"><div class="inner"><span># Sandbox set-up</span></div></a></li><li class="depth-1  current"><a href="seql.html"><div class="inner"><span># SEQL reference</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seql</span></div></div></li><li class="depth-2 branch"><a href="seql.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="seql.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h2><a href="#seql-reference" name="seql-reference"></a>SEQL reference</h2>
<p>Queries take the following arguments in <strong>SEQL</strong>, by way of the <a href="seql.core.html#var-query">seql.core/query</a> function.</p>
<p><strong>SEQL</strong> takes a lot of inspiration from <a href="https://edn-query-language.org">EQL</a>, and thus shares the following property:</p>
<blockquote>
  <p>EQL is a declarative way to make hierarchical (and possibly nested) selections of information about data requirements.</p>
  <p>EQL doesnâ€™t have its own language; it uses EDN to express the request, taking advantage of the rich set of primitives provided by it.</p>
</blockquote>
<ul>
  <li>An entity</li>
  <li>Fields to be queried</li>
  <li>Additional conditions if any</li>
</ul>
<h3><a href="#specifying-entities" name="specifying-entities"></a>Specifying entities</h3>
<p>There are two ways to specify entities, by name or using an ident to retrieve a specific record.</p>
<h4><a href="#retrieving-lists-of-records" name="retrieving-lists-of-records"></a>Retrieving lists of records</h4>
<p>Retrieve all records of the <strong>account</strong> entity, with default fields, unfiltered.</p>
<pre><code class="clojure">(query :account)
</code></pre>
<p>This will always return a collection.</p>
<h4><a href="#retrieving-records-by-ident" name="retrieving-records-by-ident"></a>Retrieving records by ident</h4>
<pre><code class="clojure">(query [:account/id 3])
</code></pre>
<p>In this case, a single record or <code>nil</code> will be returned</p>
<h3><a href="#specifying-output-fields" name="specifying-output-fields"></a>Specifying output fields</h3>
<p>The best analogy for output field specification is to think of <code>select-keys</code>.</p>
<pre><code>(query :account [:account/name :account/state])
</code></pre>
<p>With the above query, the output will be a collect of record, each containing an <code>:account/name</code> and an <code>:account/state</code> key.</p>
<h4><a href="#nested-entities" name="nested-entities"></a>Nested entities</h4>
<p>To denote nesting, maps must be used</p>
<pre><code>(query :account [:account/name
                 :account/state
				 {:account/users [:user/email])])
</code></pre>
<p>Maps associate a relation name to a query field vector honoring the same syntax. This allows nesting deep nesting of entities</p>
<pre><code>(query :account [:account/name
                 :account/state
				 {:account/invoice [:invoice/total
				                    {:invoice/lines [:line/price]}]}])
</code></pre>
<h3><a href="#conditions" name="conditions"></a>Conditions</h3>
<p>When provided, conditions may filter results. Conditions are provided as an extra argument to <code>seql.core/query</code> as a collection of vectors. All conditions vectors have the condition name as their first element, followed by arguments if any.</p>
<pre><code>(query :account
       [:account/name]
	   [[:account/active?] [:account/category :standard]])
</code></pre></div></div></div></body></html>