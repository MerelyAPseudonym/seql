<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>seql.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Seql</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="README.html"><div class="inner"><span># Introduction</span></div></a></li><li class="depth-1 "><a href="quickstart.html"><div class="inner"><span># Quickstart</span></div></a></li><li class="depth-1 "><a href="sandbox.html"><div class="inner"><span># Sandbox set-up</span></div></a></li><li class="depth-1 "><a href="seql.html"><div class="inner"><span># SEQL reference</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seql</span></div></div></li><li class="depth-2 branch current"><a href="seql.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="seql.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="seql.core.html#var-add-condition"><div class="inner"><span>add-condition</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-add-ident"><div class="inner"><span>add-ident</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-add-listener.21"><div class="inner"><span>add-listener!</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-build-fields"><div class="inner"><span>build-fields</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-build-query"><div class="inner"><span>build-query</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-compound-extra-fields"><div class="inner"><span>compound-extra-fields</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-entity-schema"><div class="inner"><span>entity-schema</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-extract-ident"><div class="inner"><span>extract-ident</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-find-listeners"><div class="inner"><span>find-listeners</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-find-mutation"><div class="inner"><span>find-mutation</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-merge-compounds-fn"><div class="inner"><span>merge-compounds-fn</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-mutate.21"><div class="inner"><span>mutate!</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-prepare-field"><div class="inner"><span>prepare-field</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-process-compounds-fn"><div class="inner"><span>process-compounds-fn</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-process-field"><div class="inner"><span>process-field</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-process-join"><div class="inner"><span>process-join</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-process-transforms-fn"><div class="inner"><span>process-transforms-fn</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-qualify-key"><div class="inner"><span>qualify-key</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-qualify-result"><div class="inner"><span>qualify-result</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-query"><div class="inner"><span>query</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-recompose-relations"><div class="inner"><span>recompose-relations</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-remove-listener.21"><div class="inner"><span>remove-listener!</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-sql-query"><div class="inner"><span>sql-query</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-table-field"><div class="inner"><span>table-field</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-transform-for-join"><div class="inner"><span>transform-for-join</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-transform-out"><div class="inner"><span>transform-out</span></div></a></li><li class="depth-1"><a href="seql.core.html#var-unqualify"><div class="inner"><span>unqualify</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">seql.core</h1><div class="doc"><div class="markdown"><p>A way to interact with stored entities</p></div></div><div class="public anchor" id="var-add-condition"><h3>add-condition</h3><div class="usage"><code>(add-condition schema q [condition &amp; args])</code></div><div class="doc"><div class="markdown"><p>If conditions are provided, add them to the query</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L126">view source</a></div></div><div class="public anchor" id="var-add-ident"><h3>add-ident</h3><div class="usage"><code>(add-ident q schema ident arg)</code></div><div class="doc"><div class="markdown"><p>Add a where clause for an ident</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L52">view source</a></div></div><div class="public anchor" id="var-add-listener.21"><h3>add-listener!</h3><div class="usage"><code>(add-listener! env mutation handler)</code></div><div class="doc"><div class="markdown"><p>Given an environment, add a mutation handler. Yields an updated environment</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L353">view source</a></div></div><div class="public anchor" id="var-build-fields"><h3>build-fields</h3><div class="usage"><code>(build-fields {:keys [compounds], :as schema} fields)</code></div><div class="doc"><div class="markdown"><p>Build query field names</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L38">view source</a></div></div><div class="public anchor" id="var-build-query"><h3>build-query</h3><div class="usage"><code>(build-query env entity fields)</code></div><div class="doc"><div class="markdown"><p>Build a base query preparing joins when needed</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L105">view source</a></div></div><div class="public anchor" id="var-compound-extra-fields"><h3>compound-extra-fields</h3><div class="usage"><code>(compound-extra-fields compounds fields)</code></div><div class="doc"><div class="markdown"><p>Figure out which fields aren’t needed once compounds have been processed on a record</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L209">view source</a></div></div><div class="public anchor" id="var-entity-schema"><h3>entity-schema</h3><div class="usage"><code>(entity-schema {:keys [schema]} entity)</code></div><div class="doc"><div class="markdown"><p>Look up entity’s schema</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L14">view source</a></div></div><div class="public anchor" id="var-extract-ident"><h3>extract-ident</h3><div class="usage"><code>(extract-ident entity result)</code></div><div class="doc"><div class="markdown"><p>When a query is targetting an ident, extract the first result</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L176">view source</a></div></div><div class="public anchor" id="var-find-listeners"><h3>find-listeners</h3><div class="usage"><code>(find-listeners env mutation)</code></div><div class="doc"><div class="markdown"><p>Fetch listeners</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L296">view source</a></div></div><div class="public anchor" id="var-find-mutation"><h3>find-mutation</h3><div class="usage"><code>(find-mutation env mutation)</code></div><div class="doc"><div class="markdown"><p>Fetch mutation description</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L286">view source</a></div></div><div class="public anchor" id="var-merge-compounds-fn"><h3>merge-compounds-fn</h3><div class="usage"><code>(merge-compounds-fn compounds)</code></div><div class="doc"><div class="markdown"><p>Merge compounds into record</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L219">view source</a></div></div><div class="public anchor" id="var-mutate.21"><h3>mutate!</h3><div class="usage"><code>(mutate! env mutation params)</code><code>(mutate! env mutation params metadata)</code></div><div class="doc"><div class="markdown"><p>Perform a mutation. Since mutations are spec’d, parameters are expected to conform it.</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L306">view source</a></div></div><div class="public anchor" id="var-prepare-field"><h3>prepare-field</h3><div class="usage"><code>(prepare-field schema field value)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L120">view source</a></div></div><div class="public anchor" id="var-process-compounds-fn"><h3>process-compounds-fn</h3><div class="usage"><code>(process-compounds-fn schema #:seql.core{:keys [fields]})</code></div><div class="doc"><div class="markdown"><p>Yield a schema-specific function to process compounds on the fly</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L227">view source</a></div></div><div class="public anchor" id="var-process-field"><h3>process-field</h3><div class="usage"><code>(process-field schema {:keys [relations compounds fields entity]})</code></div><div class="doc"><div class="markdown"><p>Add necessary stanzas to </p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L69">view source</a></div></div><div class="public anchor" id="var-process-join"><h3>process-join</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Process join by relation type</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L57">view source</a></div></div><div class="public anchor" id="var-process-transforms-fn"><h3>process-transforms-fn</h3><div class="usage"><code>(process-transforms-fn schema type)</code></div><div class="doc"><div class="markdown"><p>Yield a function which processes records and applies predefined transforms</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L199">view source</a></div></div><div class="public anchor" id="var-qualify-key"><h3>qualify-key</h3><div class="usage"><code>(qualify-key k)</code></div><div class="doc"><div class="markdown"><p>Given the enforced terminology at query time, yield back a qualified keyword</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L184">view source</a></div></div><div class="public anchor" id="var-qualify-result"><h3>qualify-result</h3><div class="usage"><code>(qualify-result m)</code></div><div class="doc"><div class="markdown"><p>Qualify a result with the appropriate namespace</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L194">view source</a></div></div><div class="public anchor" id="var-query"><h3>query</h3><div class="usage"><code>(query env entity)</code><code>(query env entity fields)</code><code>(query env entity fields conditions)</code></div><div class="doc"><div class="markdown"><p>Look up entities.</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L265">view source</a></div></div><div class="public anchor" id="var-recompose-relations"><h3>recompose-relations</h3><div class="usage"><code>(recompose-relations fields records)</code></div><div class="doc"><div class="markdown"><p>The join query perfomed by <code>query</code> returns a flat list of entries, potentially unsorted (this is database implementation specific) recompose a tree of entities as specified in fields.</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L239">view source</a></div></div><div class="public anchor" id="var-remove-listener.21"><h3>remove-listener!</h3><div class="usage"><code>(remove-listener! env mutation handler)</code></div><div class="doc"><div class="markdown"><p>Given an environment, remove a mutation handler. Yields an updated environment.</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L360">view source</a></div></div><div class="public anchor" id="var-sql-query"><h3>sql-query</h3><div class="usage"><code>(sql-query env entity fields conditions)</code></div><div class="doc"><div class="markdown"><p>Build a SQL query for the pull-syntax expressed. This is an incremental data-based creation of a </p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L161">view source</a></div></div><div class="public anchor" id="var-table-field"><h3>table-field</h3><div class="usage"><code>(table-field table field)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L48">view source</a></div></div><div class="public anchor" id="var-transform-for-join"><h3>transform-for-join</h3><div class="usage"><code>(transform-for-join k)</code></div><div class="doc"><div class="markdown"><p>Transform to expected SQL format</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L31">view source</a></div></div><div class="public anchor" id="var-transform-out"><h3>transform-out</h3><div class="usage"><code>(transform-out k)</code></div><div class="doc"><div class="markdown"><p>Prepare name transforms (yields a tuple of database name to aliased name)</p></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L23">view source</a></div></div><div class="public anchor" id="var-unqualify"><h3>unqualify</h3><div class="usage"><code>(unqualify m)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/exoscale/seql/blob/0.1.0/src/seql/core.clj#L302">view source</a></div></div></div></body></html>